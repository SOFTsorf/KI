<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligenter KI-Assistent</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: #121212; 
            color: white;
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0; 
        }
        .chat-container { 
            width: 100%; max-width: 500px; height: 80vh; 
            background: #1e1e1e; border-radius: 20px; 
            display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }
        #chat-box { 
            flex: 1; padding: 20px; overflow-y: auto; 
            display: flex; flex-direction: column; gap: 15px; 
        }
        .message { padding: 12px 18px; border-radius: 18px; line-height: 1.4; max-width: 85%; word-wrap: break-word; }
        .user { align-self: flex-end; background: #007bff; color: white; border-bottom-right-radius: 2px; }
        .ai { align-self: flex-start; background: #333; color: #e0e0e0; border-bottom-left-radius: 2px; }
        
        .input-area { background: #252525; padding: 15px; display: flex; gap: 10px; align-items: center; }
        input { 
            flex: 1; background: #333; border: none; padding: 12px 20px; 
            border-radius: 25px; color: white; outline: none; font-size: 16px;
        }
        button { 
            border: none; background: #007bff; color: white; 
            width: 45px; height: 45px; border-radius: 50%; 
            cursor: pointer; font-size: 18px; transition: 0.2s;
        }
        button:hover { background: #0056b3; transform: scale(1.05); }
        button:active { transform: scale(0.95); }
        .mic-btn.active { background: #ff3b30; animation: pulse 1.5s infinite; }
        
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255,59,48,0.7); } 70% { box-shadow: 0 0 0 10px rgba(255,59,48,0); } 100% { box-shadow: 0 0 0 0 rgba(255,59,48,0); } }
        
        /* Scrollbar Styling */
        #chat-box::-webkit-scrollbar { width: 6px; }
        #chat-box::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
    </style>
</head>
<body>

<div class="chat-container">
    <div id="chat-box">
        <div class="message ai">Hallo! Ich bin deine intelligente KI. Du kannst mit mir schreiben oder sprechen. Wie kann ich helfen?</div>
    </div>
    <div class="input-area">
        <input type="text" id="user-input" placeholder="Frag mich etwas..." autocomplete="off">
        <button id="mic-btn" class="mic-btn">ðŸŽ¤</button>
        <button id="send-btn">âž¤</button>
    </div>
</div>

<script>
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const micBtn = document.getElementById('mic-btn');

    // HIER DEINEN API-KEY EINTRAGEN
    const apiKey = 'HIER_DEIN_OPENAI_KEY_REIN'; 

    // Das GedÃ¤chtnis der KI (Context)
    let memory = [
        { role: "system", content: "Du bist ein hilfreicher, freundlicher KI-Assistent. Antworte prÃ¤zise und auf Deutsch." }
    ];

    // 1. Sprachausgabe
    function speak(text) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'de-DE';
        window.speechSynthesis.speak(utterance);
    }

    // 2. Nachricht im UI anzeigen
    function addMessage(text, sender) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('message', sender);
        msgDiv.innerText = text;
        chatBox.appendChild(msgDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // 3. Echte KI-Abfrage (OpenAI)
    async function fetchAIResponse(userText) {
        // Lade-Indikator
        const loadingDiv = document.createElement('div');
        loadingDiv.classList.add('message', 'ai');
        loadingDiv.innerText = " KI schreibt...";
        chatBox.appendChild(loadingDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        // User Nachricht zum GedÃ¤chtnis hinzufÃ¼gen
        memory.push({ role: "user", content: userText });

        try {
            const response = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",
                    messages: memory,
                    temperature: 0.7
                })
            });

            const data = await response.json();
            const aiText = data.choices[0].message.content;

            // Nachricht zum GedÃ¤chtnis hinzufÃ¼gen
            memory.push({ role: "assistant", content: aiText });

            // UI aktualisieren
            chatBox.removeChild(loadingDiv);
            addMessage(aiText, 'ai');
            speak(aiText);

        } catch (error) {
            chatBox.removeChild(loadingDiv);
            addMessage("Fehler: Verbindung zur KI fehlgeschlagen. Hast du einen gÃ¼ltigen API-Key eingetragen?", 'ai');
            console.error(error);
        }
    }

    // 4. Events fÃ¼r Tipp-Feature
    function handleSend() {
        const text = userInput.value.trim();
        if (text !== "") {
            addMessage(text, 'user');
            userInput.value = "";
            fetchAIResponse(text);
        }
    }

    sendBtn.addEventListener('click', handleSend);
    userInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSend(); });

    // 5. Spracherkennung (Voice-Feature)
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (SpeechRecognition) {
        const recognition = new SpeechRecognition();
        recognition.lang = 'de-DE';
        recognition.interimResults = false;

        micBtn.addEventListener('click', () => {
            recognition.start();
            micBtn.classList.add('active');
        });

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            userInput.value = transcript;
            micBtn.classList.remove('active');
            handleSend();
        };

        recognition.onerror = () => micBtn.classList.remove('active');
        recognition.onspeechend = () => recognition.stop();
    } else {
        micBtn.style.display = "none";
    }
</script>

</body>
</html>
    const userInput = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const micBtn = document.getElementById('mic-btn');

    // 1. Sprachausgabe (KI spricht)
    function speak(text) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'de-DE';
        window.speechSynthesis.speak(utterance);
    }

    // 2. Chat-Verlauf aktualisieren
    function addMessage(text, sender) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('message', sender);
        msgDiv.innerText = text;
